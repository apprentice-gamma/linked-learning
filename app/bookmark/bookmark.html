<!DOCTYPE html>
<html>
	<head>
		<meta charst="UTF-8">
		<title>Linked Learning Bookmarks</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
		<link rel="stylesheet" href="../../css/validation.css"/>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
		<script src="bookmark.app.js"></script>
		<script src="bookmark.controller.js"></script>
	</head>
	<body ng-app="bookmark" ng-controller="BookmarkController as vm">
		<div class="container">
			<div class="row clearfix">
				<div class="col-md-12 column">
					<h2>Linked Learning Listings</h2>
				</div>
				<div class="col-md-8 column">
					<form role="form" class="form-inline">
						<div class="form-group">
							<label for="bookmarkSearch"><span class="glyphicon glyphicon-search">&nbsp;</span></label><input type="text" class="form-control" id="bookmarkSearch" ng-model="vm.search" size="50" />
						</div>
						<div class="pull-right">{{(vm.bookmarks|filter: vm.search).length}} bookmarks of {{vm.bookmarks.length}}</div>
					</form> <br/>
					<div class="panel panel-primary" ng-repeat="bookmark in vm.bookmarks | filter: vm.search">
						<div class="panel-heading">
							<h3 class="panel-title">
							{{bookmark.title}}
							</h3>
						</div>
						<div class="panel-body">
							<p><a href={{bookmark.url}}>{{bookmark.url}}</a></p>
							<p>{{bookmark.description}} </p>
							<div class="panel panel-primary" ng-repeat="comment in bookmark.comments">
								<div class="panel-body">{{comment.body}}  Date: {{comment.date | date}}</div>
							</div>

						</div>
						<div class="panel-footer">
							Added: {{bookmark.date | date}} by {{bookmark.user}}
							<button class="btn btn-danger pull-right btn-xs" ng-click="vm.deleteBookmark($index)"><span class="glyphicon glyphicon-trash"></span></button>
						</div>
					</div>
					</div> <!-- column -->
					<!-- RH -->
					<div class="col-md-4 column">
						<h3>Add Bookmark</h3>
						<form name="addBookmark" class="form-horizontal" role="form" ng-submit="vm.addBookmark(addBookmark.$valid)" novalidate>
							<div class="form-group">
								<div class="col-sm-12">
									<input type="text" class="form-control input" id="inputURL" ng-model="vm.newBookmark.url" placeholder="URL (required)" ng-pattern="vm.urlRegEx" name = "url" required/>
									<h5 class='text-danger' ng-show="addBookmark.url.$invalid && addBookmark.url.$dirty">URL INVALID</h5>
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-12">
									<input type="text" class="form-control input" id="inputTitle" ng-model="vm.newBookmark.title" placeholder="Title (required)" name="title" required/>
									<h5 class='text-danger' ng-show="addBookmark.title.$invalid && addBookmark.title.$dirty">TITLE REQUIRED</h5>
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-12">
									<textarea rows="3" class="form-control" id="inputdescription" ng-model="vm.newBookmark.description" placeholder="Description"></textarea>
								</div>
							</div>
							<div class="form-group">
								<div class="col-sm-12">
									<input type="text" class="form-control input" id="inputUser" ng-model="vm.newBookmark.user" placeholder="User (required)" name="username" required/>
									<h5 class='text-danger' ng-show="addBookmark.username.$invalid && addBookmark.username.$dirty">USERNAME REQUIRED</h5>
									</div>
								</div>
								<div class="form-group">
									<div class="col-sm-12">
										<button class="btn btn-success pull-right" type="submit" ng-disabled="addBookmark.$invalid" ng-click="addBookmark.$setPristine()"><span class="glyphicon glyphicon-plus-sign"></span> Add
										</button>
									</div>
								</div>
							</form>
							</div> <!-- column -->
							</div> <!-- row clearfix -->
							</div> <!-- container -->
						</body>
					</html>